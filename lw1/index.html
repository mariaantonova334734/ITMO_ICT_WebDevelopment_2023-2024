
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="../lw2/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.1">
    
    
      
        <title>Лабораторная работа 1. Работа с сокетами - Лабораторные работы</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.72749a73.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Лабораторные работы" class="md-header__button md-logo" aria-label="Лабораторные работы" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Лабораторные работы
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Лабораторная работа 1. Работа с сокетами
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Лабораторные работы" class="md-nav__button md-logo" aria-label="Лабораторные работы" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Лабораторные работы
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    №1: Сокеты
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            №1: Сокеты
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../lw2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    №2: Django
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            №2: Django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../lw3/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    №3: Реализация серверной части на django rest
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            №3: Реализация серверной части на django rest
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../lw4/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    №4: Vue.js
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            №4: Vue.js
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    Практическое задание 1
  </a>
  
    <nav class="md-nav" aria-label="Практическое задание 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    Листинг кода
  </a>
  
    <nav class="md-nav" aria-label="Листинг кода">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client_1py" class="md-nav__link">
    client_1.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server_1py" class="md-nav__link">
    server_1.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    Скриншот работы и выполнения задания 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    Практическое задание 2
  </a>
  
    <nav class="md-nav" aria-label="Практическое задание 2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    Листинг кода
  </a>
  
    <nav class="md-nav" aria-label="Листинг кода">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client_2py" class="md-nav__link">
    client_2.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server_2py" class="md-nav__link">
    server_2.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    Скриншот работы и выполнения задания 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    Практическое задание 3
  </a>
  
    <nav class="md-nav" aria-label="Практическое задание 3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    Листинг кода
  </a>
  
    <nav class="md-nav" aria-label="Листинг кода">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serverpy" class="md-nav__link">
    server.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexhtml" class="md-nav__link">
    index.html
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    Скриншот работы и выполнения задания 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    Практическое задание 4
  </a>
  
    <nav class="md-nav" aria-label="Практическое задание 4">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    Листинг кода
  </a>
  
    <nav class="md-nav" aria-label="Листинг кода">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serverpy_1" class="md-nav__link">
    server.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientpy" class="md-nav__link">
    client.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    Скриншот работы и выполнения задания 4
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    Практическое задание 5
  </a>
  
    <nav class="md-nav" aria-label="Практическое задание 5">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    Листинг кода
  </a>
  
    <nav class="md-nav" aria-label="Листинг кода">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serverpy_2" class="md-nav__link">
    server.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clientpy_1" class="md-nav__link">
    client.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formhtml" class="md-nav__link">
    form.html
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    Вывод
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="1">Лабораторная работа 1. Работа с сокетами</h1>
<h2 id="1_1">Практическое задание 1</h2>
<p>Реализовать клиентскую и серверную часть приложения. Клиент отсылает серверу сообщение «Hello, server». Сообщение должно отразиться на стороне сервера. Сервер в ответ отсылает клиенту сообщение «Hello, client». Сообщение должно отобразиться у клиента. Обязательно использовать библиотеку socket. Реализовать с помощью протокола UDP.</p>
<h3 id="_1">Листинг кода</h3>
<h4 id="client_1py">client_1.py</h4>
<pre><code>import socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
message = 'Hello, server'.encode()
server_address = ('localhost', 10000)

try:
    print('Отправка {!r}'.format(message))
    sent = sock.sendto(message, server_address)

    data, server = sock.recvfrom(4096)
    print('Получено {!r}'.format(data))

except Exception as e:
    print(f'Произошла ошибка: {e}')

finally:
    sock.close()
</code></pre>
<h4 id="server_1py">server_1.py</h4>
<pre><code>import socket

# UDP
udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
message = 'Hello, client'.encode()

server_address = ('localhost', 10000)  #
udp_socket.bind(server_address)

while True:
    data, address = udp_socket.recvfrom(1024)
    print(f'Получено сообщение от {address}: {data.decode()}')

    udp_socket.sendto(message, address)
</code></pre>
<h4 id="1_2">Скриншот работы и выполнения задания 1</h4>
<p><img alt="img.png" src="img.png" />
<img alt="img_1.png" src="img_1.png" /></p>
<h2 id="2">Практическое задание 2</h2>
<p>Задание: реализовать клиентскую и серверную часть приложения. Клиент запрашивает у сервера выполнение математической операции, параметры, которые вводятся с клавиатуры. Сервер обрабатывает полученные данные и возвращает результат клиенту.</p>
<p>Варианты:</p>
<p>a. Теорема Пифагора</p>
<p>b. Решение квадратного уравнения.</p>
<p>c. Поиск площади трапеции.</p>
<p>d. Поиск площади параллелограмма.</p>
<p>Мой вариант - b. Решение квадратного уравнения.</p>
<h3 id="_2">Листинг кода</h3>
<h4 id="client_2py">client_2.py</h4>
<pre><code>import socket

while True:
  client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  client_socket.connect(('localhost', 12345))

print("(a, b, c):")
a, b, c = map(float, input().split())
client_socket.send(f"{a} {b} {c}".encode('utf-8'))

result = client_socket.recv(1024).decode('utf-8')
print(f"Result: {result}")

client_socket.close()
</code></pre>
<h4 id="server_2py">server_2.py</h4>
<pre><code>import socket
import math


def solve_quadratic(a, b, c):
  D = b**2 - 4 * a * c
  if D &lt; 0:
    return "no sols. D&lt;0"
  else:
    sol1 = (-b - math.sqrt(D)) / (2 * a)
    sol2 = (-b + math.sqrt(D)) / (2 * a)
    return sol1, sol2


with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server_socket:
  server_socket.bind(('localhost', 12345))
  server_socket.listen(1)

  while True:
    client_socket, addr = server_socket.accept()
    with client_socket:
      print(f"new request: {addr}")
      data = client_socket.recv(1024).decode('utf-8')
      a, b, c = map(float, data.split())
      result = solve_quadratic(a, b, c)
      client_socket.send(str(result).encode('utf-8'))
</code></pre>
<h4 id="2_1">Скриншот работы и выполнения задания 2</h4>
<p><img alt="img_2.png" src="img_2.png" />
<img alt="img_3.png" src="img_3.png" /></p>
<h2 id="3">Практическое задание 3</h2>
<p>Реализовать серверную часть приложения. Клиент подключается к серверу. В ответ клиент получает http-сообщение, содержащее html-страницу, которую сервер подгружает из файла index.html. Обязательно использовать библиотеку socket. Реализовать с помощью протокола UDP.</p>
<h3 id="_3">Листинг кода</h3>
<h4 id="serverpy">server.py</h4>
<pre><code>import socket
import threading

def handle_client(client_socket):
    headers = 'HTTP/1.1 200 OK\r\nContent-Type: text/html; charset=utf-8\r\n\r\n'
    with open('index.html', 'r') as f:
        content = f.read()
    client_socket.sendall((headers + content).encode('utf-8'))
    client_socket.close()

def start_server():
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    host = 'localhost'
    port = 8080
    server.bind((host, port))
    server.listen(4)
    print(f'Started on http://{host}:{port}')
    while True:
        client_socket, address = server.accept()
        data = client_socket.recv(2048).decode('utf-8')
        print(f"-&gt; Подключение от {address}")
        print(f"Запрос:\n{data}")
        client_thread = threading.Thread(target=handle_client, args=(client_socket,))
        client_thread.start()

start_server()
</code></pre>
<h4 id="indexhtml">index.html</h4>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;Server response&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;
  Hello from server in html
  &lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="3_1">Скриншот работы и выполнения задания 3</h4>
<p><img alt="img_5.png" src="img_5.png" />
<img alt="img_6.png" src="img_6.png" />
<img alt="img_4.png" src="img_4.png" /></p>
<h2 id="4">Практическое задание 4</h2>
<p>Реализовать двухпользовательский или многопользовательский чат. Реализация многопользовательского часа позволяет получить максимальное количество баллов. Реализовать с помощью протокола TCP. Обязательно использовать библиотеку threading. Для применения с TCP необходимо запускать клиентские подключения И прием и отправку сообщений всем юзерам на сервере в потоках. Не забудьте сохранять юзеров, чтобы потом отправлять им сообщения.</p>
<h3 id="_4">Листинг кода</h3>
<h4 id="serverpy_1">server.py</h4>
<pre><code>import socket
import threading


def handle_client(conn, addr):
  while True:
    data = conn.recv(1024).decode()
    if not data:
      break
    print(f"User-{addr[1]}: {data}")
    broadcast_message(data, conn)
  conn.close()
  remove_connection(conn)


def broadcast_message(message, from_conn):
  for conn in connections:
    if conn != from_conn:
      conn.send(message.encode())


def remove_connection(conn):
  connections.remove(conn)


def server_program():
  server_socket = socket.socket()
  server_socket.bind((socket.gethostname(), 15000))
  server_socket.listen(5)  # Allow up to 5 connections in the queue
  print("Server started. Waiting for connections...")

  while True:
    conn, addr = server_socket.accept()
    print("Connected to:", addr)
    connections.append(conn)
    thread = threading.Thread(target=handle_client, args=(conn, addr))
    thread.start()

  server_socket.close()


if __name__ == '__main__':
  connections = []
  server_program()
</code></pre>
<h4 id="clientpy">client.py</h4>
<pre><code>import socket
import threading


def receive_messages(client_socket):
  while True:
    data = client_socket.recv(1024).decode()
    if not data:
      break
    print(f"Server-{client_socket.getsockname()[1]}: {data}")


def client_program():
  host = socket.gethostname()
  port = 15000
  client_socket = socket.socket()
  client_socket.connect((host, port))
  print("Connected to the server.")

  receive_thread = threading.Thread(target=receive_messages,
                                    args=(client_socket, ))
  receive_thread.start()

  while True:
    message = input(" -&gt; ")
    client_socket.send(message.encode())
    if message.lower().strip() == 'bye':
      break

  client_socket.close()


if __name__ == '__main__':
  client_program()
</code></pre>
<h4 id="4_1">Скриншот работы и выполнения задания 4</h4>
<p><img alt="img_7.png" src="img_7.png" />
<img alt="img_8.png" src="img_8.png" />
<img alt="img_9.png" src="img_9.png" /></p>
<h2 id="5">Практическое задание 5</h2>
<p>Необходимо написать простой web-сервер для обработки GET и POST http запросов средствами Python и библиотеки socket. Задание - сделать сервер, который может:
* Принять и записать информацию о дисциплине и оценке по дисциплине.
* Отдать информацию обо всех оценах по дсициплине в виде html-страницы.</p>
<h3 id="_5">Листинг кода</h3>
<h4 id="serverpy_2">server.py</h4>
<pre><code>import http.server
import socketserver
import urllib.parse

class MyHttpRequestHandler(http.server.SimpleHTTPRequestHandler):
    def do_GET(self):
        if self.path == '/':
            self.send_response(200)
            self.send_header("Content-type", "text/html; charset=utf-8")
            self.end_headers()
            with open('data.txt', 'r', encoding='utf-8') as f:
                data = f.read()
                html = '''
                &lt;!DOCTYPE html&gt;
                &lt;html&gt;
                &lt;head&gt;
                    &lt;title&gt;Оценки&lt;/title&gt;
                &lt;/head&gt;
                &lt;body&gt;
                    &lt;h2&gt;Оценки&lt;/h2&gt;
                    &lt;ul&gt;
                        {}
                    &lt;/ul&gt;
                    &lt;a href="/form" style="color: black;"&gt;+ Добавить дисциплину&lt;/a&gt;
                &lt;/body&gt;
                &lt;/html&gt;
                '''.format(data)
                self.wfile.write(bytes(html, 'utf8'))
            print("GET request processed, data sent to client.")
        elif self.path == '/form':
            self.send_response(200)
            self.send_header("Content-type", "text/html; charset=utf-8")
            self.end_headers()
            with open('form.html', 'r', encoding='utf-8') as f:
                form_data = f.read()
                self.wfile.write(bytes(form_data, 'utf8'))
            print("GET request for form.html processed, form sent.")
        else:
            self.send_response(404)
            print("GET request for unknown resource, 404 sent.")

    def do_POST(self):
        content_length = int(self.headers['Content-Length'])
        post_data = self.rfile.read(content_length)
        post_data = urllib.parse.parse_qs(post_data.decode('utf-8'))
        subject = post_data.get('subject', [''])[0]
        grade = post_data.get('grade', [''])[0]
        with open('data.txt', 'a', encoding='utf-8') as f:
            f.write('&lt;li&gt;' + subject + ' - ' + grade + '&lt;/li&gt;\n')
        self.send_response(303)
        self.send_header("Location", "/")
        self.end_headers()
        print("POST request processed, data saved.")

handler_object = MyHttpRequestHandler

PORT = 8080
my_server = socketserver.TCPServer(("", PORT), handler_object)

print("Server started at http://localhost:" + str(PORT))
my_server.serve_forever()
</code></pre>
<h4 id="clientpy_1">client.py</h4>
<pre><code># альтернативный вариант
import requests

data = {'subject': 'Лин алгебра', 'grade': '5'}
response = requests.post('http://localhost:8080/', data=data)
print(response)
</code></pre>
<h4 id="formhtml">form.html</h4>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="ru"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;Оценка формы&lt;/h2&gt;

    &lt;form action="http://localhost:8080" method="post"&gt;
    &lt;label for="subject"&gt;Предмет:&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" id="subject" name="subject"&gt;&lt;br&gt;
    &lt;label for="grade"&gt;Оценка:&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" id="grade" name="grade"&gt;&lt;br&gt;&lt;br&gt;
    &lt;input type="submit" value="Submit"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><img alt="img_12.png" src="img_12.png" />
<img alt="img_13.png" src="img_13.png" />
<img alt="img_14.png" src="img_14.png" />
<img alt="img_15.png" src="img_15.png" /></p>
<h2 id="_6">Вывод</h2>
<p>В рамках данной лабораторной работы были получены навыки по реализации web-серверов и использования сокетов при помощи языка программирования python. Были получены знания по клиент-серверному взаимодействию с помощью протоколов UDP и TCP. Также были систематизированы знания по сетевому взаимодействию, структурами http-запросов и процессами их создания и обработки. Таким образом, данные знания и навыки помогли понять, как происходит сетевое взаимодействие при реализации web-серверов, а также как можно применять полученные знания при создании веб-приложений.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "content.code.copy"], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
    
  </body>
</html>